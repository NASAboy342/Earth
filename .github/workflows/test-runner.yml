name: Deploy

on:
  push:
    branches: [ main ]

env:
  repositoryDir: D:\Clones\Earth
  projectDir: ${{ env.repositoryDir }}\Earth

jobs:
  test-runner:
    runs-on: self-hosted  # This will use your self-hosted runner
    
    steps:
    - name: Pull Repository
      shell: powershell
      run: |
        Write-Host "Going to project directory..."
        cd $env:repositoryDir
        Write-Host "Try to pull the latest code..."
        git pull origin main

    - name: Deploy Application
      shell: powershell
      run: |
        Write-Host "Going to project directory..."
        cd $env:projectDir
        Write-Host "Building application..."
        npm install
        npx vite build
